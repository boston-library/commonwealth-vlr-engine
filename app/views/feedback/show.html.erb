<% @page_title = t('blacklight.feedback.title', :application_name => application_name) %>
<div class="col-sm-12" id="contact_content">
  <h1><%= t('blacklight.feedback.title') %></h1>

  <p><%= t('blacklight.feedback.blurb') %></p>

  <% unless @errors.empty? %>
    <div id="error_explanation" class="alert alert-error">
        <ul class="errors">
            <% @errors.each do |msg| %>
                <li><%= msg %></li>
            <% end %>
        </ul>
    </div>
  <% end %>

  <div class="row">
    <div class="col-sm-8">
      <%= form_tag(feedback_path, id: 'feedback_form') do %>
        <div class="row mb-3">
          <label class="col-md-2 col-form-label text-end"><%= t('blacklight.feedback.form.name') %></label>
          <div class="col-md-8 col-lg-6">
            <%= text_field_tag :name, params[:name], class: 'form-control' %>
          </div>
        </div>
        <div class="row mb-3">
          <label class="col-md-2 col-form-label text-end"><%= t('blacklight.feedback.form.email') %></label>
          <div class="col-md-8 col-lg-6">
            <%= text_field_tag :email, params[:email], class: 'form-control' %>
          </div>
        </div>
        <div class="row mb-3">
          <label class="col-md-2 col-form-label text-end"><%= t('blacklight.feedback.form.topic.label') %></label>
          <div class="col-md-8 col-lg-6">
            <%= select_tag(:topic,
                           options_for_select(feedback_type_options),
                           id: 'message_type_select',
                           data: { topic_options: raw(I18n.t('blacklight.feedback.form.topic.options').to_json) },
                           class: 'form-select') %>
            <div id="contact_help_text" class="alert alert-warning" style="display: none;">
              <!-- help content rendered dynamically by commonwealth-vlr-engine/feedback_alerts.js -->
            </div>
          </div>
        </div>
        <div class="row mb-3">
          <label class="col-md-2 col-form-label text-end"><%= t('blacklight.feedback.form.message') %></label>
          <div class="col-md-8">
            <%= text_area_tag :message, params[:message], size: '24x6', class: 'form-control' %>
          </div>
        </div>
        <div class="row mb-3">
          <div class="offset-md-2 col-md-4">
            <%= recaptcha_tags(id: 'feedback_recaptcha') %>
            <%= submit_tag(t('blacklight.feedback.submit'), class: 'btn btn-primary mt-3') %>
          </div>
        </div>
      <% end %>
    </div>
  </div>
  <%# javascript_include_tag 'commonwealth-vlr-engine/feedback_alerts' %>
</div>
