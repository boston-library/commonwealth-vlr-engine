/* various utilities for ocr search results display in Bootstrap modal */

var top_pagination_selector = '#ocr_search_details .page-links a';
var bottom_pagination_selector = '#ocr_pagination a';
var relevancy_link_selector = '#sort-dropdown a';
var suggest_link_selector = '#ocr_search_suggest a';
var page_rel_selectors = top_pagination_selector + ", " + bottom_pagination_selector + ", " + relevancy_link_selector + ", " + suggest_link_selector;

/* pagination links should preserve the modal rather than reloading the page */
$(page_rel_selectors).on("click", Blacklight.modal.modalAjaxLinkClick);

/* show loading status for results, next page, etc. */
$(page_rel_selectors).on("click", function() {
  addModalTransition();
});
$('.ocr-search-form').submit(function() {
  addModalTransition();
});

/* toggle the ocr snippets collapse link text */
$('.ocr_snippets_expand').on('click', function() {
  toggleText($(this),
      '<%= I18n.t('blacklight.ocr.search.results.snippets.more') %>',
      '<%= I18n.t('blacklight.ocr.search.results.snippets.less') %>');
});

// add the .modal-transition class
function addModalTransition () {
  $('#modal-transition').toggle();
}
